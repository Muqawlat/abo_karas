{{/* layouts/partials/hero.html - Ultra-Robust Image Finder */}}

{{/* البحث عن الصورة بالامتداد الذي استخدمته (.jpeg) */}}
{{ $heroResource := resources.Get "images/hero.jpeg" }}

{{ if not $heroResource }}
  {{/* إذا لم يتم العثور على .jpeg، نجرب الامتداد الشائع (.jpg) */}}
  {{ $heroResource = resources.Get "images/hero.jpg" }}
{{ end }}

{{ $webp := false }}
{{ $meta := dict "width" 600 "height" 400 }}

{{ with $heroResource }}
  {{/* الصورة موجودة: نقوم بمعالجتها وتحديد أبعادها */}}
  {{ $resized := .Fill "1200x800 center" }}
  {{ $webp = $resized | resources.Convert "webp" }}
  {{ $meta = dict "width" $webp.Width "height" $webp.Height }}
{{ else }}
  {{/* الصورة غير موجودة: نستخدم صورة Placeholder مؤقتة (لتحذيرك وتجنب الانهيار) */}}
  {{ $webp = resources.GetRemote "https://placehold.co/1200x800/eeeeee/333333/webp?text=IMAGE+FILE+NOT+FOUND" }}
{{ end }}

<section class="hero" aria-label="Hero - {{ .Site.Params.company_name }}">
  <div class="container">
    <div class="content" style="max-width:620px;">
      <h1 class="h1">{{ .Site.Title }}</h1>
      <p class="lead">{{ .Site.Params.tagline }}</p>

      <div class="flex">
        {{/* Call Now button */}}
        {{ $phone := .Site.Params.phone | default "" }}
        {{ $phone_clean := replaceRE `[^+\d]` "" $phone }}
        <a class="btn btn-primary" href="tel:{{ $phone_clean }}" aria-label="اتصل الآن">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24c1.12.37 2.33.57 3.57.57a1 1 0 011 1V20a1 1 0 01-1 1C9.61 21 3 14.39 3 6a1 1 0 011-1h3.5a1 1 0 011 1c0 1.24.2 2.45.57 3.57a1 1 0 01-.24 1.01l-2.21 2.21z" fill="#fff"/>
          </svg>
          اتصل الآن
        </a>

        <a class="btn btn-secondary" href="#services">خدماتنا</a>
      </div>
    </div>

    {{ with $webp }}
    <div class="visual" aria-hidden="true">
      <img
        loading="eager"
        src="{{ .RelPermalink }}"
        width="{{ $meta.width }}"
        height="{{ $meta.height }}"
        alt="أعمال مقاولات احترافية — {{ $.Site.Params.company_name }}">
    </div>
    {{ end }}
  </div>
</section>
