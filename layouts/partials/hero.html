{{/* layouts/partials/hero.html - FINAL STABLE VERSION */}}

{{ $imageFound := false }}
{{ $imageURL := "" }}
{{ $imageWidth := 1200 }}
{{ $imageHeight := 800 }}

{{/* 1. المحاولة الأولى: العثور على الصورة المحلية (hero.jpeg أو hero.jpg) */}}
{{ $localResource := resources.Get "images/hero.jpeg" }}
{{ if not $localResource }}
  {{ $localResource = resources.Get "images/hero.jpg" }}
{{ end }}

{{ with $localResource }}
  {{/* إذا تم العثور على الصورة المحلية، قم بتحويلها إلى WebP */}}
  {{ $imageFound = true }}
  {{ $resized := .Fill "1200x800 center" }}
  {{ $webpResource := $resized | resources.Convert "webp" }}
  {{ $imageURL = $webpResource.RelPermalink }}
  {{ $imageWidth = $webpResource.Width }}
  {{ $imageHeight = $webpResource.Height }}
{{ end }}

{{/* 2. إذا لم يتم العثور على الصورة المحلية، استخدم Placeholder */}}
{{ if not $imageFound }}
  {{ $remoteResource := resources.GetRemote "https://placehold.co/1200x800/eeeeee/333333/png?text=UPLOAD+YOUR+HERO+IMAGE" }}
  {{ $imageURL = $remoteResource.RelPermalink }}
{{ end }}


<section class="hero" aria-label="Hero - {{ .Site.Params.company_name }}">
  <div class="container">
    <div class="content" style="max-width:620px;">
      <h1 class="h1">{{ .Site.Title }}</h1>
      <p class="lead">{{ .Site.Params.tagline }}</p>

      <div class="flex">
        {{/* Call Now button */}}
        {{ $phone := .Site.Params.phone | default "" }}
        {{ $phone_clean := replaceRE `[^+\d]` "" $phone }}
        <a class="btn btn-primary" href="tel:{{ $phone_clean }}" aria-label="اتصل الآن">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24c1.12.37 2.33.57 3.57.57a1 1 0 011 1V20a1 1 0 01-1 1C9.61 21 3 14.39 3 6a1 1 0 011-1h3.5a1 1 0 011 1c0 1.24.2 2.45.57 3.57a1 1 0 01-.24 1.01l-2.21 2.21z" fill="#fff"/>
          </svg>
          اتصل الآن
        </a>

        <a class="btn btn-secondary" href="#services">خدماتنا</a>
      </div>
    </div>

    <div class="visual" aria-hidden="true">
      <img
        loading="eager"
        src="{{ $imageURL }}"
        width="{{ $imageWidth }}"
        height="{{ $imageHeight }}"
        alt="أعمال مقاولات احترافية — {{ $.Site.Params.company_name }}">
    </div>
  </div>
</section>
